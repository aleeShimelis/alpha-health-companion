# Cursor Rules for ALPHA

## Architecture
- Keep to FastAPI + SQLAlchemy models with a single shared Base from `app/db.py`.
- Ensure `from . import models` runs before `Base.metadata.create_all(bind=engine)` in `app/main.py`.
- `vital_records.user_id` must FK to `users.id`. Do not split Bases.

## API Style
- Pydantic request = `XxxIn`, response = `XxxOut`.
- Use `/auth`, `/profiles`, `/vitals`, `/symptoms`, `/reports`, `/goals`, `/reminders` route groups.
- Use `Depends(get_current_user)` for protected routes.
- Status codes: POST=201, PUT/PATCH=200, DELETE=204, validation errors=400.

## Frontend
- React + TS + Vite, router-based pages. Use `AuthContext` to store token in localStorage.
- API base from `import.meta.env.VITE_API_BASE`.
- Avoid case-only filename changes (Windows). Use `VitalsPage.tsx`.

## Docs Consistency
- Align with `docs/alpha-brief.md` and `docs/CS500_G24_ALPHA_Intelligent_Health_companion_and_Monitoring_System*`.
- No caregiver actor. Use non-clinical language and disclaimers.

## Testing & DX
- Keep small vertical slices: implement route + basic UI + smoke tests, then iterate.
- Write migration-ready models (later we’ll add Alembic).

Create a `.cursorrules` at repo root that enforces:
- Single SQLAlchemy Base from `app/db.py`; all models must import that Base.
- `from . import models` must run before `Base.metadata.create_all(bind=engine)` in `app/main.py`.
- `vital_records.user_id` → FK("users.id", ondelete="CASCADE"), and users table must be registered before create_all.
- React/Vite: `@vitejs/plugin-react` present, `vite.config.ts` imports and registers it. `src/vite-env.d.ts` declares `import.meta.env.VITE_API_BASE`.
- Prevent Windows casing bugs: page components use PascalCase filenames, e.g., `VitalsPage.tsx`.
- Non-clinical advice only; caregiver actor is out-of-scope (deferred).
- Ports: API runs on 8001 when GeoServer uses 8000; frontend reads `VITE_API_BASE`.
